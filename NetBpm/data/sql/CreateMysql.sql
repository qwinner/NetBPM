CREATE TABLE NBPM_ACTOR(ID VARCHAR(255) NOT NULL PRIMARY KEY,SUBCLASS VARCHAR(255) NOT NULL,NAME VARCHAR(255),TYPE_ VARCHAR(255),PARENT VARCHAR(255),FIRSTNAME VARCHAR(255),LASTNAME VARCHAR(255),EMAIL VARCHAR(255),CONSTRAINT FKDC4D3E4BC4AB08AA FOREIGN KEY(PARENT) REFERENCES NBPM_ACTOR(ID));
CREATE TABLE NBPM_LOG(ID BIGINT NOT NULL PRIMARY KEY,ACTORID VARCHAR(255),FLOW BIGINT,DATE_ DATETIME,TYPE_ SMALLINT);
CREATE TABLE NBPM_DELEGATION(ID BIGINT NOT NULL PRIMARY KEY,PROCESSDEFINITION BIGINT,CLASSNAME VARCHAR(255),CONFIGURATION VARCHAR(255),EXCEPTIONHANDLER SMALLINT);
CREATE TABLE NBPM_FIELD(ID BIGINT NOT NULL PRIMARY KEY,NAME VARCHAR(255),DESCRIPTION VARCHAR(255),INDEX_ INTEGER,ATTRIBUTE BIGINT,STATE BIGINT,ACCESS_ SMALLINT,HTMLFORMATTERDELEGATION BIGINT,CONSTRAINT FKDC9635503553D7E7 FOREIGN KEY(HTMLFORMATTERDELEGATION) REFERENCES NBPM_DELEGATION(ID));
CREATE TABLE NBPM_PROCESSINSTANCE(ID BIGINT NOT NULL PRIMARY KEY,START_ DATETIME,END_ DATETIME,INITIATORACTORID VARCHAR(255),PROCESSDEFINITION BIGINT,ROOTFLOW BIGINT,SUPERPROCESSFLOW BIGINT);
CREATE TABLE NBPM_TRANSITION(ID BIGINT NOT NULL PRIMARY KEY,FROM_ BIGINT,TO_ BIGINT,NAME VARCHAR(255),DESCRIPTION VARCHAR(255),PROCESSDEFINITION BIGINT);
CREATE TABLE NBPM_ATTRIBUTEINSTANCE(ID BIGINT NOT NULL PRIMARY KEY,VALUETEXT VARCHAR(255),ATTRIBUTE BIGINT,SCOPE BIGINT);
CREATE TABLE NBPM_MEMBERSHIP(ID BIGINT NOT NULL PRIMARY KEY,ROLE VARCHAR(255),TYPE_ VARCHAR(255),GROUP_ VARCHAR(255),USER_ VARCHAR(255),CONSTRAINT FK1BE14120B63DD9C0 FOREIGN KEY(GROUP_) REFERENCES NBPM_ACTOR(ID),CONSTRAINT FK1BE141206A68DF4 FOREIGN KEY(USER_) REFERENCES NBPM_ACTOR(ID));
CREATE TABLE NBPM_PROCESSBLOCK(ID BIGINT NOT NULL PRIMARY KEY,SUBCLASS VARCHAR(255) NOT NULL,PARENTBLOCK BIGINT,NAME VARCHAR(255),DESCRIPTION VARCHAR(255),PROCESSDEFINITION BIGINT,FORK BIGINT,JOIN_ BIGINT,RESPONSIBLEUSERNAME VARCHAR(255),VERSION_ INTEGER,STARTSTATE BIGINT,ENDSTATE BIGINT,IMAGE LONG VARBINARY,IMAGEMIMETYPE VARCHAR(255),IMAGEHEIGHT INTEGER,IMAGEWIDTH INTEGER,AUTHORIZATIONDELEGATION BIGINT,CONSTRAINT FKB1DE48450E681 FOREIGN KEY(AUTHORIZATIONDELEGATION) REFERENCES NBPM_DELEGATION(ID),CONSTRAINT FKB1DE483AE6A603 FOREIGN KEY(PARENTBLOCK) REFERENCES NBPM_PROCESSBLOCK(ID),CONSTRAINT FKB1DE48B7C43122 FOREIGN KEY(PROCESSDEFINITION) REFERENCES NBPM_PROCESSBLOCK(ID));
CREATE TABLE NBPM_ATTRIBUTE(ID BIGINT NOT NULL PRIMARY KEY,SCOPE BIGINT,INITIALVALUE VARCHAR(255),SERIALIZERDELEGATION BIGINT,NAME VARCHAR(255),DESCRIPTION VARCHAR(255),PROCESSDEFINITION BIGINT,CONSTRAINT FK46521BF2A061B05A FOREIGN KEY(SERIALIZERDELEGATION) REFERENCES NBPM_DELEGATION(ID),CONSTRAINT FK46521BF2B7C43122 FOREIGN KEY(PROCESSDEFINITION) REFERENCES NBPM_PROCESSBLOCK(ID),CONSTRAINT FK46521BF26833E54 FOREIGN KEY(SCOPE) REFERENCES NBPM_PROCESSBLOCK(ID));
CREATE TABLE NBPM_ACTION(ID BIGINT NOT NULL PRIMARY KEY,DEFINITIONOBJECT BIGINT NOT NULL,EVENTTYPE SMALLINT NOT NULL,ACTIONDELEGATION BIGINT,CONSTRAINT FKAD5A74807E4E3BFE FOREIGN KEY(ACTIONDELEGATION) REFERENCES NBPM_DELEGATION(ID));
CREATE TABLE NBPM_JOB(ID BIGINT NOT NULL PRIMARY KEY,PROCESSDEFINITION BIGINT,CONTEXT BIGINT,DATE_ DATETIME,USERID VARCHAR(255),PWD VARCHAR(255),REFERENCE VARCHAR(255),ACTIONDELEGATION BIGINT,CONSTRAINT FK375F5193B7C43122 FOREIGN KEY(PROCESSDEFINITION) REFERENCES NBPM_PROCESSBLOCK(ID),CONSTRAINT FK375F51937E4E3BFE FOREIGN KEY(ACTIONDELEGATION) REFERENCES NBPM_DELEGATION(ID));
CREATE TABLE NBPM_FLOW(ID BIGINT NOT NULL PRIMARY KEY,NAME VARCHAR(255),ACTORID VARCHAR(255),START_ DATETIME,END_ DATETIME,PARENTREACTIVATION BIT,NODE BIGINT,PROCESSINSTANCE BIGINT,PARENT BIGINT,CONSTRAINT FKB48905F8C4AB08AA FOREIGN KEY(PARENT) REFERENCES NBPM_FLOW(ID),CONSTRAINT FKB48905F8842C3824 FOREIGN KEY(PROCESSINSTANCE) REFERENCES NBPM_PROCESSINSTANCE(ID));
CREATE TABLE NBPM_NODE(ID BIGINT NOT NULL PRIMARY KEY,SUBCLASS VARCHAR(255) NOT NULL,PROCESSBLOCK BIGINT,NAME VARCHAR(255),DESCRIPTION VARCHAR(255),PROCESSDEFINITION BIGINT,COORDINATEX1 INTEGER,COORDINATEY1 INTEGER,COORDINATEX2 INTEGER,COORDINATEY2 INTEGER,ASSIGNMENTDELEGATION BIGINT,ACTORROLENAME VARCHAR(255),SUBPROCESS BIGINT,PROCESSINVOKERDELEGATION BIGINT,ACTOREXPRESSION VARCHAR(255),DECISIONDELEGATION BIGINT,FORKDELEGATION BIGINT,JOINDELEGATION BIGINT,CONSTRAINT FKB48CB2CCAA96D113 FOREIGN KEY(PROCESSINVOKERDELEGATION) REFERENCES NBPM_DELEGATION(ID),CONSTRAINT FKB48CB2CCDB870B8A FOREIGN KEY(FORKDELEGATION) REFERENCES NBPM_DELEGATION(ID),CONSTRAINT FKB48CB2CC953D700F FOREIGN KEY(SUBPROCESS) REFERENCES NBPM_PROCESSBLOCK(ID),CONSTRAINT FKB48CB2CCDC6D79F2 FOREIGN KEY(JOINDELEGATION) REFERENCES NBPM_DELEGATION(ID),CONSTRAINT FKB48CB2CCB7C43122 FOREIGN KEY(PROCESSDEFINITION) REFERENCES NBPM_PROCESSBLOCK(ID),CONSTRAINT FKB48CB2CC16B99624 FOREIGN KEY(DECISIONDELEGATION) REFERENCES NBPM_DELEGATION(ID),CONSTRAINT FKB48CB2CCBDC5B3D5 FOREIGN KEY(ASSIGNMENTDELEGATION) REFERENCES NBPM_DELEGATION(ID),CONSTRAINT FKB48CB2CC7534635E FOREIGN KEY(PROCESSBLOCK) REFERENCES NBPM_PROCESSBLOCK(ID));
CREATE TABLE NBPM_LOGDETAIL(ID BIGINT NOT NULL PRIMARY KEY,SUBCLASS VARCHAR(255) NOT NULL,LOG_ BIGINT,ATTRIBUTE BIGINT,TEXT_ VARCHAR(255),DELEGATION BIGINT,CLASSNAME VARCHAR(255),EXCEPTIONMESSAGE VARCHAR(255),LONG_ BIGINT,CONSTRAINT FKD617A9EBC7AA9C FOREIGN KEY(ATTRIBUTE) REFERENCES NBPM_ATTRIBUTE(ID),CONSTRAINT FKD617A9EB32C59B FOREIGN KEY(LOG_) REFERENCES NBPM_LOG(ID),CONSTRAINT FKD617A9EB52D4AD28 FOREIGN KEY(DELEGATION) REFERENCES NBPM_DELEGATION(ID));
CREATE TABLE NBPM_ASSEMBLYFILE(ID BIGINT NOT NULL PRIMARY KEY,FILENAME VARCHAR(255),ASSEMBLYVERSION VARCHAR(255),ASSEMBLYNAME VARCHAR(255),BYTES LONG VARBINARY,PROCESSDEFINITION BIGINT,CONSTRAINT FK44FE944AB7C43122 FOREIGN KEY(PROCESSDEFINITION) REFERENCES NBPM_PROCESSBLOCK(ID));

ALTER TABLE NBPM_LOG ADD CONSTRAINT FK375F591A30012E FOREIGN KEY(FLOW) REFERENCES NBPM_FLOW(ID);
ALTER TABLE NBPM_DELEGATION ADD CONSTRAINT FKBE986672B7C43122 FOREIGN KEY(PROCESSDEFINITION) REFERENCES NBPM_PROCESSBLOCK(ID);
ALTER TABLE NBPM_FIELD ADD CONSTRAINT FKDC96355068AC491 FOREIGN KEY(STATE) REFERENCES NBPM_NODE(ID);
ALTER TABLE NBPM_FIELD ADD CONSTRAINT FKDC963550C7AA9C FOREIGN KEY(ATTRIBUTE) REFERENCES NBPM_ATTRIBUTE(ID);
ALTER TABLE NBPM_PROCESSINSTANCE ADD CONSTRAINT FK236E60DA2D1911C2 FOREIGN KEY(SUPERPROCESSFLOW) REFERENCES NBPM_FLOW(ID);
ALTER TABLE NBPM_PROCESSINSTANCE ADD CONSTRAINT FK236E60DAB7C43122 FOREIGN KEY(PROCESSDEFINITION) REFERENCES NBPM_PROCESSBLOCK(ID);
ALTER TABLE NBPM_PROCESSINSTANCE ADD CONSTRAINT FK236E60DAF607B530 FOREIGN KEY(ROOTFLOW) REFERENCES NBPM_FLOW(ID);
ALTER TABLE NBPM_TRANSITION ADD CONSTRAINT FK4FF269F1C144 FOREIGN KEY(TO_) REFERENCES NBPM_NODE(ID);
ALTER TABLE NBPM_TRANSITION ADD CONSTRAINT FK4FF269FB7C43122 FOREIGN KEY(PROCESSDEFINITION) REFERENCES NBPM_PROCESSBLOCK(ID);
ALTER TABLE NBPM_TRANSITION ADD CONSTRAINT FK4FF269F5D2DDF5 FOREIGN KEY(FROM_) REFERENCES NBPM_NODE(ID);
ALTER TABLE NBPM_ATTRIBUTEINSTANCE ADD CONSTRAINT FK84748E876833E54 FOREIGN KEY(SCOPE) REFERENCES NBPM_FLOW(ID);
ALTER TABLE NBPM_ATTRIBUTEINSTANCE ADD CONSTRAINT FK84748E87C7AA9C FOREIGN KEY(ATTRIBUTE) REFERENCES NBPM_ATTRIBUTE(ID);
ALTER TABLE NBPM_PROCESSBLOCK ADD CONSTRAINT FKB1DE48A1927D4F FOREIGN KEY(STARTSTATE) REFERENCES NBPM_NODE(ID);
ALTER TABLE NBPM_PROCESSBLOCK ADD CONSTRAINT FKB1DE4866309C76 FOREIGN KEY(ENDSTATE) REFERENCES NBPM_NODE(ID);
ALTER TABLE NBPM_PROCESSBLOCK ADD CONSTRAINT FKB1DE48300CC2 FOREIGN KEY(FORK) REFERENCES NBPM_NODE(ID);
ALTER TABLE NBPM_PROCESSBLOCK ADD CONSTRAINT FKB1DE48609C875 FOREIGN KEY(JOIN_) REFERENCES NBPM_NODE(ID);
ALTER TABLE NBPM_JOB ADD CONSTRAINT FK375F519338B735AF FOREIGN KEY(CONTEXT) REFERENCES NBPM_FLOW(ID);
ALTER TABLE NBPM_FLOW ADD CONSTRAINT FKB48905F833AE02 FOREIGN KEY(NODE) REFERENCES NBPM_NODE(ID);
